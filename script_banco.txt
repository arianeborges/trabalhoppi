CREATE TABLE Usuario(
	login varchar(30) NOT NULL,
    senha varchar(30) NOT NULL
);

CREATE TABLE Funcionario(
    id INT NOT NULL AUTO_INCREMENT,
    nomefunc VARCHAR(50) NOT NULL,
    datanascimento DATE NOT NULL,
    sexo VARCHAR(2) NOT NULL,
    estadocivil VARCHAR(20) NOT NULL,
    cargofunc VARCHAR(30) NOT NULL,
    especialidade VARCHAR(30) NOT NULL,
    cpffunc VARCHAR(30) NOT NULL,
    rgfunc VARCHAR(30) NOT NULL,
    outro VARCHAR(30) NOT NULL,
    CONSTRAINT id_funcionario PRIMARY KEY(id)
); 

CREATE TABLE EnderecoFunc(
    id_funcionario INT NOT NULL, 
    cep VARCHAR(20) NOT NULL,
    estado VARCHAR(30) NOT NULL,
    cidade VARCHAR(30) NOT NULL,
    bairro VARCHAR(30) NOT NULL,
    tipologradouro VARCHAR(30) NOT NULL,
    logradouro VARCHAR(30) NOT NULL,
    numero INT NOT NULL,
    complemento VARCHAR(30) NOT NULL,
    CONSTRAINT referencia_funcionario FOREIGN KEY(id_funcionario) REFERENCES Funcionario(id)
); 

CREATE TABLE Paciente(
	id INT NOT NULL AUTO_INCREMENT,
    nome VARCHAR(50) NOT NULL,
    telefone VARCHAR(20) NOT NULL,
    CONSTRAINT id_paciente PRIMARY KEY(id)
);

CREATE TABLE Agenda(
    codAgendamento INT NOT NULL AUTO_INCREMENT,
    dataconsulta DATE NOT NULL,
    horaconsulta INT NOT NULL,
    codFuncionario INT NOT NULL,
    codPaciente INT NOT NULL,
    CONSTRAINT id_agenda PRIMARY KEY(codAgendamento),
    CONSTRAINT referencias_unicas UNIQUE(dataconsulta,horaconsulta,codFuncionario),
    CONSTRAINT referencia_funcionario_agenda FOREIGN KEY(codFuncionario) REFERENCES Funcionario(id),
    CONSTRAINT referencia_paciente_agenda FOREIGN KEY(codPaciente) REFERENCES Paciente(id) 
);



